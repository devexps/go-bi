# Web SDK

## Initialization
```html
<script type="text/javascript" src="bi_sdk.js"></script>
<script type="text/javascript">
    const params = {"appid": "********", "appkey": "********"}
    // The first parameter is the start address of the reporting service
    // The second parameter is appid, which is generated by the BI Backend after creating the application.
    // The third parameter is appkey, which is generated by the BI Backend after creating the application.
    // The four parameter is the client debug type
    // =0 means normal input to kafka
    // =1 is test mode (data storage)
    // =2 is test mode (data is not stored)
    let eventReport = new EventReport("http://127.0.0.1:8080", params["appid"], params["appkey"], 0)
</script>
```

## Manually set the user's distinctid
```js
eventReport.identify("123456789")
```

## Get the distinctid of the current user
```js
eventReport.getDistinctId()
```

## Login
The distinctid is automatically generated base on UUID, if you want to access your own business server userid, use this method
```js
eventReport.login("<your-id>")
```

## Logout
Logout the current user
```js
eventReport.logout()
```

## Set global properties
For example, username, age, address, these attributes need to be set in each event, you can call this method
```js
eventReport.setSuperProperties({name: "thangn", age: 33, address: "123 won street"})
```

## Delete the global attribute value
```js
// delete the name attribute
eventReport.unsetSuperProperties("name")
```

## Clear all global properties
```js
eventReport.clearSuperProperties()
```

## Report user attributes
```js
// chain calls
eventReport
    // When the attribute has a value before, it will be ignore this message
    .userSetOnce({"address": "123 won street"})
    // When you want to set user's attributes. 
    // If exists before, it will overwrite the original attribute value.
    // If not exists before, it will be newly created.
    .userSet({"name": "thangn", "age": 33}) 
    // When you want to clear a user attribute value of a user
    .userUnset("name")
    // When you want to upload a numerical attribute, you can call this to accumulate the attribute.
    // If the attribute has not been set, it will be assigned a value of 0 before calculation.
    // If a negative value is passed in, it is equivalent to the subtraction operation.
    .userAdd({"age": 1})
    // Final report -> tracking
    .trackUserData()
```

## Event report
```js
// Report an event
// The first parameter is the event name
// The second parameter is the event additional attribute with type is usually an object
eventReport.track("Visit the website", {feeling: "Hello World!"})
```

## Complete example
```html
<script type="text/javascript" src="bi_sdk.js"></script>
<script type="text/javascript">
     const params = {"appid": "********", "appkey": "********"}
     const eventReport = new EventReport("http://127.0.0.1:8080", params["appid"], params["appkey"], 0)
     eventReport.track("Visit the website", {feeling: "Hello World!"})
</script>
```